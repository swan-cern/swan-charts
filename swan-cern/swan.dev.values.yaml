swan:
  jupyterhub:
    singleuser:
      image:
        name: "gitlab-registry.cern.ch/swan/docker-images/systemuser"
        tag: "v5.6.1"
        pullPolicy: Always
      # JH can randomly generate one, but then proxy also needs to do it
      secretToken: ca4ac8ac414707020a7db74341eaf25de01f6d0bd73f4ceb9d2a197f1e3b9f32
    hub:
      image:
        name: "gitlab-registry.cern.ch/swan/docker-images/jupyterhub"
        tag: "v1.13"
      config:
        KeyCloakAuthenticator:
          allowed_roles:
            - swan-admins
            - swan-qa
            - swan-devs
      extraVolumes:
        - name: cvmfs-sft-cern-ch
          persistentVolumeClaim:
            claimName: cvmfs-sft-cern-ch-pvc
        - name: swan-jh
          configMap:
            name: swan-scripts
            items:
            - key: jupyterhub_form.html
              path: jupyterhub_form.html
            - key: swan_config.py
              path: swan_config.py
        - name: swan-jh-cern
          configMap:
            name: swan-scripts-cern
            items:
            - key: options_form_config.json
              path: options_form_config.json
            - key: swan_config_cern.py
              path: swan_config_cern.py
            - key: swan_spark_config.py
              path: swan_spark_config.py
        - name: swan-cull-scripts
          configMap:
            name: swan-scripts-cern
            items:
            - key: cull_check_ticket.sh
              path: cull_check_ticket.sh
            - key: cull_delete_ticket.sh
              path: cull_delete_ticket.sh
            defaultMode: 356 # 0544 perm
        - name: swan-tokens-scripts
          configMap:
            name: swan-scripts-env-dev
            items:
            - key: hadoop_token.sh
              path: hadoop_token.sh
            - key: webhdfs_token.sh
              path: webhdfs_token.sh
            - key: eos_token.sh
              path: eos_token.sh
            - key: sparkk8s_token.sh
              path: sparkk8s_token.sh
            defaultMode: 356 # 0544 perm
        - name: swan-secrets
          secret:
            secretName: swan-cern
            items:
            - key: eos.cred
              path: eos.cred
            - key: hadoop.cred
              path: hadoop.cred
            - key: sparkk8s.cred
              path: sparkk8s.cred
      db:
        type: sqlite-memory
    prePuller:
      hook:
        enabled: false
    custom:
      cvmfs:
        repositories:
          - sft.cern.ch
          - sft-nightlies.cern.ch